@page "/"
@page "/Post/{PostId:int}"

@using System.Diagnostics

<div><a href="Post/1">Go to Post 1</a></div>
<div><a href="Post/2">Go to Post 2</a></div>

<h3>And here is the post</h3>
<div>@Post</div>


@code {

    [Parameter]
    public int PostId
    {
        get => _postId;
        set
        {
            if (!value.Equals(_postId))
            {
                _postId = value;
                GetPostAsync();
            }
        }
    }

    private int _postId = 0;

    private string Post { get; set; } = "No Post Selected.";

    private async void GetPostAsync()
    {
        Post = "Loading...";
        await InvokeAsync(StateHasChanged);
        await Task.Delay(1000);
        Post = $"This is Post {_postId}";
        await InvokeAsync(StateHasChanged);
    }

    protected override Task OnInitializedAsync()
    {
        return base.OnInitializedAsync();
    }

    protected override Task OnParametersSetAsync()
    {
        return base.OnParametersSetAsync();
    }

}

