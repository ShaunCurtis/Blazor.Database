@page "/fetchdataInline"

@namespace Blazor.Database.RouteViews

<UIComponent Show="this.ShowEditor">
    <WeatherForecastEditorForm ID="this.editorId" ExitAction="this.CloseDialog"></WeatherForecastEditorForm>
</UIComponent>
<UIComponent Show="this.ShowViewer">
    <WeatherForecastViewerForm ID="this.viewerId" ExitAction="this.CloseDialog"></WeatherForecastViewerForm>
</UIComponent>

<WeatherForecastListForm EditRecord="this.GoToEditor" ViewRecord="this.GoToViewer" NewRecord="this.GoToNew" ExitAction="Exit"></WeatherForecastListForm>

@code {

    [Inject] NavigationManager NavManager { get; set; }

    private Guid editorId = Guid.Empty;
    private Guid viewerId = Guid.Empty;

    private bool ShowViewer => this.viewerId != Guid.Empty;
    private bool ShowEditor => this.editorId != Guid.Empty;

    public void GoToEditor(Guid id)
        => SetIds(id, Guid.Empty);

    public void GoToNew()
        => SetIds(Guid.Empty, Guid.Empty);

    public void GoToViewer(Guid id)
        => SetIds(Guid.Empty, id);

    public void CloseDialog()
        => SetIds(Guid.Empty, Guid.Empty);

    public void Exit()
        => this.NavManager.NavigateTo("index");

    private void SetIds(Guid editorId, Guid viewerId)
    {
        this.editorId = editorId;
        this.viewerId = viewerId;
    }
}

