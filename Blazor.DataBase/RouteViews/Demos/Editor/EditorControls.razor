@page "/EditorControls"
@namespace Blazor.Database.Components

<EditForm Model="this.model" OnValidSubmit="this.ValidSubmit">
    <div class="container m-5 p-4 border border-secondary">
        <div class="row">
            <div class="col-12">
                <h2>Test Editor</h2>
            </div>
        </div>
        <div class="row mb-2">
            <div class="col-4 form-label" for="txtcountry">
                Country (Any Value)
            </div>
            <div class="col-4">
                <InputDataList @bind-Value="model.Value" DataList="Countries.CountryArray" class="form-control" placeholder="Select a country"></InputDataList>
            </div>
        </div>
        <div class="row mb-2">
            <div class="col-4 form-label" for="txtcountry">
                Country (Strict)
            </div>
            <div class="col-4">
                <InputDataList @bind-Value="model.StrictValue" DataList="Countries.CountryArray" RestrictToList="true" class="form-control" placeholder="Select a country"></InputDataList>
            </div>
            <div class="col-4">
                <ValidationMessage For="(() => model.StrictValue)"></ValidationMessage>
            </div>
        </div>
        <div class="row mb-2">
            <div class="col-4 form-label" for="txtcountry">
                Country T Index
            </div>
            <div class="col-4">
                <InputDataListSelect TValue="int" @bind-Value="model.TIndex" DataList="Countries.CountryDictionary" class="form-control" placeholder="Select a country"></InputDataListSelect>
            </div>
            <div class="col-4">
                <ValidationMessage For="(() => model.TIndex)"></ValidationMessage>
            </div>
        </div>
        <div class="row mb-2">
            <div class="col-4 form-label" for="txtcountry">
                Opinion
            </div>
            <div class="col-4">
                <ButtonSelectControl @bind-Value="model.Opinion" DataList="this.opinion" ButtonColour="info" ButtonGroupSize="@ButtonSelectControl.ButtonSize.Small"></ButtonSelectControl>
            </div>
        </div>
        <div class="row mb-2">
            <div class="col-6">
                <ValidationSummary></ValidationSummary>
            </div>
            <div class="col-6 text-right">
                <button class="btn btn-secondary" @onclick="(e) => this.CheckButton()">Check</button>
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </div>
    </div>

</EditForm>

<div class="container">
    <div class="row mb-2">
        <div class="col-4 form-label">
            Country Value
        </div>
        <div class="col-4 form-control">
            @this.model.Value
        </div>
    </div>
    <div class="row mb-2">
        <div class="col-4 form-label">
            Country Strict Value
        </div>
        <div class="col-4 form-control">
            @this.model.StrictValue
        </div>
    </div>
    <div class="row mb-2">
        <div class="col-4 form-label">
            Country T Index
        </div>
        <div class="col-4 form-control">
            @this.model.TIndex
        </div>
    </div>
    <div class="row mb-2">
        <div class="col-4 form-label">
            Opinion Index
        </div>
        <div class="col-4 form-control">
            @this.model.Opinion
        </div>
    </div>
</div>

@code {

    Model model = new Model();

    private void CheckButton()
    {
    }

    private void ValidSubmit()
    {
    }

    private SortedDictionary<int, string> opinion => new SortedDictionary<int, string>()
{
        {1, "Agree"},
        {2, "Ambivalent"},
        {3, "Disagree"},
    };

    class Model
    {
        public string Value { get; set; } = string.Empty;
        public string StrictValue { get; set; } = string.Empty;
        public int Index { get; set; } = 0;
        public int TIndex { get; set; } = 0;
        public int Opinion { get; set; } = 0;
    }

}

