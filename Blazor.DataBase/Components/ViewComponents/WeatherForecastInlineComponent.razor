@namespace Blazor.Database.Components

<UIBase Show="this.ShowEditor">
    <WeatherForecastEditorForm ID="this.editorId" ExitAction="this.CloseDialog"></WeatherForecastEditorForm>
</UIBase>
<UIBase Show="this.ShowViewer">
    <WeatherForecastViewerForm ID="this.editorId" ExitAction="this.CloseDialog"></WeatherForecastViewerForm>
</UIBase>

<WeatherForecastListForm EditRecord="this.GoToEditor" ViewRecord="this.GoToViewer" NewRecord="this.GoToNew" ExitAction="Exit"></WeatherForecastListForm>

@code {

    [Inject] NavigationManager NavManager { get; set; }

    private int editorId = 0;
    private int viewerId = 0;

    private bool ShowViewer => this.viewerId != 0;
    private bool ShowEditor => this.editorId != 0;

    protected override Task OnInitializedAsync()
    {
        return base.OnInitializedAsync();
    }

    public void GoToEditor(int id)
    {
        this.editorId = id;
        this.viewerId = 0;
    }

    public void GoToNew()
    {
        this.editorId = -1;
        this.viewerId = 0;
    }

    public void GoToViewer(int id)
    {
        this.editorId = 0;
        this.viewerId = id;
    }

    public void CloseDialog()
    {
        this.editorId = 0;
        this.viewerId = 0;
    }

    public void Exit()
    {
        this.NavManager.NavigateTo("/");
    }

}
